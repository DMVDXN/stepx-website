<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Details - StepX</title>
    <link rel="stylesheet" href="stepx_product_detail.css"> <!-- Link to your CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> <!-- Heart Icon -->
</head>
<body>

    <header class="top-bar">
        <div class="logo">StepX</div>
        <div class="search-container">
            <i class="fa fa-search search-icon"></i>
            <input type="text" placeholder="Search for brand, color, etc">
        </div>
    
        <div class="icons">
            <div class="favorites">
                <i class="fa fa-heart"></i>
                <span>Favorites</span>
            </div>
            <i class="fa fa-shopping-cart"></i>
            <i class="fa fa-bell"></i>
            <i class="fa fa-user"></i>
        </div>
    </header>
    
    <div class="navigation-wrapper">
        <div class="navigation">
            <a href="#">Brands</a>
            <a href="#">New</a>
            <a href="#">Men</a>
            <a href="#">Women</a>
            <a href="#">Kids</a>
            <a href="#">Sneakers</a>
            <a href="#">Shoes</a>
        </div>
    </div>
    
    <div style="height: 50px;"></div>

<div class="product-detail-page">

  <!-- Left: Shoe Image -->
  <div class="left-column">
    <img id="product-image" class="product-image" src="" alt="Product Image">
    <p id="product-description" class="product-description"></p>
  </div>

  <!-- Right: Product Info -->
  <div class="right-column">
    <div class="product-header">
      <h1 id="product-title" class="product-title"></h1>
      <p id="product-price" class="product-price"></p>
    </div>

    <label class="size-label">Select Size</label>
    <div id="sizes-container" class="sizes-container">
      <!-- Sizes will load here -->
    </div>

    <button class="add-to-cart-btn">Add to Cart</button>
    <button class="favorite-btn">Favorite <i class="far fa-heart"></i></button>

  </div>

</div>


<div class="theme-buttons">
  <button onclick="setDarkMode()">
      <i class="fa fa-moon"></i> <!-- Moon Icon -->
  </button>
  <button onclick="setLightMode()">
      <i class="fa fa-sun"></i> <!-- Sun Icon -->
  </button>
</div>


<!-- JavaScript (inside HTML, not separate) -->
<script>
// Get product ID from URL
const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');

// Base URL for images
let baseImageUrl;
if (window.location.port === "8888") {
  baseImageUrl = "http://localhost:8888/stepx-product-catalog/";
} else {
  baseImageUrl = "http://localhost/stepx-product-catalog/";
}

// Fetch product data from backend (✅ CORRECT PHP FILE NAME)
fetch('stepx_product_detail.php?id=' + productId)
  .then(response => response.json())
  .then(data => {
    if (data.error) {
      alert(data.error);
      return;
    }

    console.log("Image path from database:", data.image_path); // Debugging
    console.log("Full image URL:", baseImageUrl + data.image_path); // Debugging

    // ✅ Set the product image
    document.getElementById('product-image').src = encodeURI(baseImageUrl + data.image_path);
    document.getElementById('product-image').alt = data.name;

    // ✅ Set the product info
    document.getElementById('product-title').innerText = data.name;
    document.getElementById('product-price').innerText = '$' + data.price;
    document.getElementById('product-description').innerText = data.description;

    // ✅ Dummy sizes (for now)
    const sizesContainer = document.getElementById('sizes-container');
    sizesContainer.innerHTML = '';
    const sizes = ["M7/W8.5", "M7.5/W9", "M8/W9.5", "M8.5/W10", "M9/W10.5", "M9.5/W11", "M10/W11.5", "M10.5/W12", "M11/W12.5", "M11.5/W13", "M12/W13.5", "M13/W14.5", "M14/W15.5", "M15/W16.5", "M17/W18.5",];
    sizes.forEach(size => {
      const button = document.createElement('button');
      button.className = 'size-option';
      button.textContent = size;
      sizesContainer.appendChild(button);
    });
  })
  .catch(error => {
    console.error("Error fetching product:", error);
  });

// Highlight selected size
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('size-option')) {
    document.querySelectorAll('.size-option').forEach(btn => btn.classList.remove('selected'));
    e.target.classList.add('selected');
  }
});

// Toggle favorite heart icon
document.querySelector('.favorite-btn').addEventListener('click', function() {
  const heartIcon = this.querySelector('i');
  heartIcon.classList.toggle('fas');
  heartIcon.classList.toggle('far');
});
</script>

<script>
  let currentSlide = 0;

  function changeSlide(direction) {
      const slides = document.querySelectorAll('.brand-logo');
      currentSlide += direction;

      if (currentSlide < 0) {
          currentSlide = slides.length - 1;
      } else if (currentSlide >= slides.length) {
          currentSlide = 0;
      }

      // Hide all slides
      slides.forEach(slide => slide.style.display = 'none');
      
      // Show current slide
      slides[currentSlide].style.display = 'block';
  }

  // Initial display setup
  changeSlide(0);

  function setDarkMode() {
      document.body.classList.add('dark-mode');
  }

  function setLightMode() {
      document.body.classList.remove('dark-mode');
  }
</script>

</body>
</html>